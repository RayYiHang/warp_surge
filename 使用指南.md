# Warp Account Manager - Surgeç‰ˆä½¿ç”¨æŒ‡å—

## ğŸ“± å®‰è£…åæ£€æŸ¥

### 1. ç¡®è®¤æ¨¡å—å·²å¯ç”¨
åœ¨Surgeä¸­æ£€æŸ¥ï¼š
- è®¾ç½® â†’ æ¨¡å—ç®¡ç†
- æ‰¾åˆ° "Warp Account Manager"
- ç¡®ä¿å¼€å…³æ˜¯å¼€å¯çŠ¶æ€

### 2. ç¡®è®¤MitMå·²é…ç½®
- è®¾ç½® â†’ HTTPSè§£å¯† â†’ å¼€å¯MitM
- æ£€æŸ¥ä¸»æœºåæ˜¯å¦åŒ…å«ï¼š`app.warp.dev, dataplane.rudderstack.com, securetoken.googleapis.com`

## ğŸ”§ åå°æ“ä½œæ–¹æ³•

Surgeæ¨¡å—æ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œä½†å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ“ä½œï¼š

### æ–¹æ³•1: Surgeè„šæœ¬æ§åˆ¶å°
1. æ‰“å¼€Surge
2. è®¾ç½® â†’ è„šæœ¬ç¼–è¾‘å™¨
3. åœ¨æ§åˆ¶å°ä¸­è¾“å…¥å‘½ä»¤

### æ–¹æ³•2: é€šè¿‡HTTP APIæ“ä½œï¼ˆæ¨èï¼‰
ä½¿ç”¨curlæˆ–Postmanç›´æ¥è°ƒç”¨ï¼š

```bash
# æ·»åŠ è´¦æˆ·
curl -X POST http://127.0.0.1:6155/v1/scripts/warp-account-manager/evaluate \
  -H "Content-Type: application/json" \
  -d '{
    "code": "accountManager.addAccount({\"email\":\"test@example.com\",\"stsTokenManager\":{\"accessToken\":\"xxx\",\"refreshToken\":\"yyy\",\"expirationTime\":1234567890000}})"
  }'
```

## ğŸ“‹ æ ¸å¿ƒæ“ä½œå‘½ä»¤

### 1. æŸ¥çœ‹è´¦æˆ·åˆ—è¡¨
```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
const accounts = accountManager.getAccountList();
console.log(JSON.stringify(accounts, null, 2));
```

### 2. æ·»åŠ è´¦æˆ·
```javascript
const accountData = {
    "email": "your-email@example.com",
    "stsTokenManager": {
        "accessToken": "ä½ çš„access_token",
        "refreshToken": "ä½ çš„refresh_token",
        "expirationTime": 1234567890000
    },
    "apiKey": "AIzaSyC7_n2YgtZIvc3h9YYn24HnGqNruGrbSW8"
};

const result = accountManager.addAccount(accountData);
console.log(result);
```

### 3. åˆ‡æ¢æ´»è·ƒè´¦æˆ·
```javascript
const result = accountManager.setActiveAccount("your-email@example.com");
console.log(result);
```

### 4. æŸ¥çœ‹å½“å‰æ´»è·ƒè´¦æˆ·
```javascript
const activeAccount = accountManager.getActiveAccount();
console.log(activeAccount);
```

### 5. åˆ é™¤è´¦æˆ·
```javascript
const result = accountManager.deleteAccount("your-email@example.com");
console.log(result);
```

### 6. å¤‡ä»½æ•°æ®
```javascript
const backup = persistenceManager.backupData();
console.log(backup.data); // å¤åˆ¶è¿™ä¸ªæ•°æ®è¿›è¡Œå¤‡ä»½
```

### 7. æ¢å¤æ•°æ®
```javascript
const backupString = "ä½ çš„å¤‡ä»½æ•°æ®";
const result = persistenceManager.restoreData(backupString);
console.log(result);
```

### 8. æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
```javascript
const stats = persistenceManager.getStorageStats();
console.log(stats.stats);
```

## ğŸ” å¦‚ä½•è·å–è´¦æˆ·æ•°æ®

### æ–¹æ³•1: Chromeå¼€å‘è€…å·¥å…·
1. ç™»å½•Warp.dev
2. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åˆ‡æ¢åˆ°Application/åº”ç”¨æ ‡ç­¾
4. å·¦ä¾§é€‰æ‹©Storage â†’ Local Storage â†’ https://app.warp.dev
5. æ‰¾åˆ°åŒ…å«ç”¨æˆ·æ•°æ®çš„é¡¹ï¼Œå¤åˆ¶JSON

### æ–¹æ³•2: Networkæ ‡ç­¾
1. åœ¨Networkæ ‡ç­¾ä¸­æ‰¾åˆ°ç™»å½•ç›¸å…³çš„è¯·æ±‚
2. æŸ¥çœ‹è¯·æ±‚å¤´æˆ–å“åº”ä¸­çš„tokenä¿¡æ¯
3. æå–æ‰€éœ€çš„è´¦æˆ·æ•°æ®

## ğŸ› ï¸ å¿«é€Ÿæµ‹è¯•å‘½ä»¤

å¤åˆ¶ä»¥ä¸‹å®Œæ•´ä»£ç åˆ°æ§åˆ¶å°æ‰§è¡Œï¼Œç”¨äºæµ‹è¯•æ¨¡å—æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š

```javascript
// æµ‹è¯•æ¨¡å—åŠŸèƒ½
console.log("=== Warp Account Manager æµ‹è¯• ===");

// 1. æµ‹è¯•å­˜å‚¨åŠŸèƒ½
const testAccount = {
    "email": "test@example.com",
    "stsTokenManager": {
        "accessToken": "test_token_123",
        "refreshToken": "refresh_token_456",
        "expirationTime": Date.now() + 3600000
    }
};

console.log("1. æ·»åŠ æµ‹è¯•è´¦æˆ·...");
const addResult = accountManager.addAccount(testAccount);
console.log(addResult);

// 2. æµ‹è¯•è´¦æˆ·åˆ—è¡¨
console.log("2. è·å–è´¦æˆ·åˆ—è¡¨...");
const accounts = accountManager.getAccountList();
console.log(accounts);

// 3. æµ‹è¯•æ´»è·ƒè´¦æˆ·è®¾ç½®
console.log("3. è®¾ç½®æ´»è·ƒè´¦æˆ·...");
const setActiveResult = accountManager.setActiveAccount("test@example.com");
console.log(setActiveResult);

// 4. æµ‹è¯•å­˜å‚¨ç»Ÿè®¡
console.log("4. è·å–å­˜å‚¨ç»Ÿè®¡...");
const stats = persistenceManager.getStorageStats();
console.log(stats.stats);

console.log("=== æµ‹è¯•å®Œæˆ ===");
```

## ğŸ“Š çŠ¶æ€ç›‘æ§

### æŸ¥çœ‹Tokenåˆ·æ–°çŠ¶æ€
```javascript
const refreshStats = tokenRefreshService.getRefreshStats();
console.log(refreshStats.stats);
```

### æŸ¥çœ‹æœ€è¿‘é€šçŸ¥
```javascript
const notifications = responseHandler.getRecentNotifications(10);
console.log(notifications);
```

### è·å–ç”¨æˆ·è®¾ç½®
```javascript
const settings = persistenceManager.getSettings();
console.log(settings.settings);
```

## âš ï¸ æ•…éšœæ’é™¤

### 1. æ¨¡å—æœªç”Ÿæ•ˆ
- æ£€æŸ¥æ¨¡å—æ˜¯å¦å¯ç”¨
- é‡å¯Surge
- æŸ¥çœ‹Surgeæ—¥å¿—

### 2. Tokenæ— æ³•è‡ªåŠ¨åˆ·æ–°
- æ£€æŸ¥refreshTokenæ˜¯å¦æœ‰æ•ˆ
- æŸ¥çœ‹ç½‘ç»œè¿æ¥
- æ£€æŸ¥APIå¯†é’¥é…ç½®

### 3. è´¦æˆ·æ•°æ®ä¸¢å¤±
- ä½¿ç”¨å¤‡ä»½åŠŸèƒ½æ¢å¤
- æ£€æŸ¥æŒä¹…å­˜å‚¨æƒé™
- é‡æ–°åˆå§‹åŒ–æ•°æ®

### 4. è¯·æ±‚æœªè¢«æ‹¦æˆª
- ç¡®è®¤MitMå·²å¯ç”¨
- æ£€æŸ¥ä¸»æœºåé…ç½®
- éªŒè¯åŸŸååŒ¹é…è§„åˆ™

## ğŸ“± ç®€åŒ–ä½¿ç”¨å»ºè®®

å¦‚æœä½ è§‰å¾—ä¸Šè¿°æ“ä½œå¤ªå¤æ‚ï¼Œå¯ä»¥è€ƒè™‘ï¼š

1. **åˆ›å»ºå¿«æ·å‘½ä»¤**ï¼šå°†å¸¸ç”¨æ“ä½œä¿å­˜ä¸ºä»£ç ç‰‡æ®µ
2. **ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·**ï¼šå¦‚Postmanåˆ›å»ºAPIè¯·æ±‚é›†åˆ
3. **å¼€å‘ç®€å•ç•Œé¢**ï¼šåˆ›å»ºç®€å•çš„HTMLé¡µé¢æ¥æ“ä½œ

## ğŸ’¡ ä½¿ç”¨æç¤º

- é¦–æ¬¡ä½¿ç”¨å»ºè®®å…ˆæ‰§è¡Œæµ‹è¯•ä»£ç 
- å®šæœŸå¤‡ä»½è´¦æˆ·æ•°æ®
- æ³¨æ„è§‚å¯Ÿæ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
- Tokenä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œä¸€èˆ¬æ— éœ€æ‰‹åŠ¨å¹²é¢„

---

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹Surgeçš„æ§åˆ¶å°æ—¥å¿—æˆ–è”ç³»å¼€å‘è€…è·å–å¸®åŠ©ã€‚