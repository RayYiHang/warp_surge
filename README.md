# Warp Account Manager - Surgeç‰ˆæœ¬

[![Surge Module](https://img.shields.io/badge/Surge-Module-blue)](https://github.com/RayYiHang/warp_surge)
[![Remote Install](https://img.shields.io/badge/Remote-Install-green)](https://github.com/RayYiHang/warp_surge)

ğŸš€ **æ”¯æŒä¸€é”®è¿œç¨‹å®‰è£…çš„Surgeæ¨¡å—ï¼**

åŸºäºSurgeçš„Warp.devè´¦æˆ·ç®¡ç†å™¨ï¼Œå®Œå…¨æ›¿ä»£Pythoné¡¹ç›®ï¼Œå®ç°ç›¸åŒåŠŸèƒ½ä½†æ›´è½»é‡é«˜æ•ˆã€‚

## âš¡ ä¸€é”®å®‰è£…

### æ–¹æ³•1: ç›´æ¥å®‰è£…æ¨¡å—
å¤åˆ¶ä»¥ä¸‹é“¾æ¥åˆ°Surgeçš„æ¨¡å—ç®¡ç†ç•Œé¢ï¼š

```
https://raw.githubusercontent.com/RayYiHang/warp_surge/refs/heads/main/warp-account-manager.sgmodule
```

### æ–¹æ³•2: æ‰«æäºŒç»´ç 
åœ¨GitHubä»“åº“é¡µé¢æŸ¥çœ‹å®‰è£…äºŒç»´ç ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| ğŸ” å¤šè´¦æˆ·ç®¡ç† | æ”¯æŒæ·»åŠ ã€åˆ é™¤ã€åˆ‡æ¢Warpè´¦æˆ· | âœ… å®Œæˆ |
| ğŸ”„ è‡ªåŠ¨Tokenåˆ·æ–° | æ™ºèƒ½æ£€æµ‹å¹¶åˆ·æ–°å³å°†è¿‡æœŸçš„token | âœ… å®Œæˆ |
| ğŸ›¡ï¸ è´¦æˆ·å¥åº·ç›‘æ§ | è‡ªåŠ¨æ£€æµ‹403/401ç­‰é”™è¯¯çŠ¶æ€ | âœ… å®Œæˆ |
| ğŸ’¾ æ•°æ®æŒä¹…åŒ– | æœ¬åœ°å­˜å‚¨è´¦æˆ·æ•°æ®ï¼Œæ”¯æŒå¤‡ä»½æ¢å¤ | âœ… å®Œæˆ |
| ğŸŒ è¯·æ±‚æ‹¦æˆª | æ™ºèƒ½å¤„ç†Warp APIè¯·æ±‚å’Œå“åº” | âœ… å®Œæˆ |
| ğŸ“Š ç»Ÿè®¡åˆ†æ | æä¾›è´¦æˆ·çŠ¶æ€å’Œä½¿ç”¨ç»Ÿè®¡ | âœ… å®Œæˆ |

## ğŸ› ï¸ å®‰è£…æ­¥éª¤

### 1. å®‰è£…æ¨¡å—
åœ¨Surgeä¸­æ·»åŠ æ¨¡å—ï¼š
- è®¾ç½® â†’ æ¨¡å—ç®¡ç† â†’ å®‰è£…æ¨¡å—
- ç²˜è´´ä¸Šè¿°é“¾æ¥æˆ–æ‰«æäºŒç»´ç 

### 2. å¯ç”¨MitM
- è®¾ç½® â†’ HTTPSè§£å¯† â†’ å¼€å¯MitM
- é…ç½®ä¸»æœºåï¼š`app.warp.dev, dataplane.rudderstack.com, securetoken.googleapis.com`

### 3. é…ç½®è´¦æˆ·
ä»Chromeå¼€å‘è€…å·¥å…·è·å–è´¦æˆ·æ•°æ®ï¼Œç„¶åé€šè¿‡Surgeè„šæœ¬æ·»åŠ ï¼š
```javascript
// åœ¨Surgeè„šæœ¬æ§åˆ¶å°æ‰§è¡Œ
accountManager.addAccount({
    "email": "your-email@example.com",
    "stsTokenManager": {
        "accessToken": "...",
        "refreshToken": "...",
        "expirationTime": 1234567890000
    }
});
```

### 4. åˆ‡æ¢è´¦æˆ·
```javascript
// è®¾ç½®æ´»è·ƒè´¦æˆ·
accountManager.setActiveAccount("your-email@example.com");
```

## ğŸ“ æ ¸å¿ƒç»„ä»¶

- **`warp_manager.js`** - æ ¸å¿ƒè´¦æˆ·ç®¡ç†å’Œè¯·æ±‚å¤„ç†
- **`warp_persistence.js`** - æ•°æ®æŒä¹…åŒ–å’Œå¤‡ä»½åŠŸèƒ½
- **`warp_token_refresh.js`** - è‡ªåŠ¨tokenåˆ·æ–°æœåŠ¡
- **`warp_response_handler.js`** - å“åº”åˆ†æå’ŒçŠ¶æ€ç›‘æ§

## âš™ï¸ é…ç½®é€‰é¡¹

```javascript
const settings = {
    autoRefresh: true,        // è‡ªåŠ¨åˆ·æ–°token
    banDetection: true,       // å¯ç”¨banæ£€æµ‹
    healthCheck: true,        // å¥åº·çŠ¶æ€æ£€æŸ¥
    autoSwitch: false         // è‡ªåŠ¨åˆ‡æ¢è´¦æˆ·
};
```

## ğŸ“Š ä½¿ç”¨ç»Ÿè®¡

å®æ—¶æŸ¥çœ‹è´¦æˆ·çŠ¶æ€ï¼š
- æ€»è´¦æˆ·æ•°é‡
- å¥åº·è´¦æˆ·æ•°é‡
- è¢«å°è´¦æˆ·æ•°é‡
- Tokenåˆ·æ–°ç»Ÿè®¡
- è¯·æ±‚æˆåŠŸç‡

## ğŸ”§ æ•…éšœæ’é™¤

### Tokenåˆ·æ–°å¤±è´¥
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. éªŒè¯refreshTokenæœ‰æ•ˆæ€§
3. æŸ¥çœ‹Surgeæ§åˆ¶å°æ—¥å¿—

### è´¦æˆ·è¢«è¯¯åˆ¤å°ç¦
1. æ‰‹åŠ¨é‡ç½®å¥åº·çŠ¶æ€
2. æ£€æŸ¥APIå“åº”å†…å®¹
3. è°ƒæ•´æ£€æµ‹æ•æ„Ÿåº¦

### æ•°æ®ä¸¢å¤±
1. ä½¿ç”¨å¤‡ä»½æ¢å¤åŠŸèƒ½
2. æ£€æŸ¥æŒä¹…å­˜å‚¨æƒé™
3. é‡æ–°åˆå§‹åŒ–æ•°æ®åº“

## ğŸš€ æ€§èƒ½ä¼˜åŠ¿

| é¡¹ç›® | Pythonæ–¹æ¡ˆ | Surgeæ–¹æ¡ˆ |
|------|-----------|----------|
| èµ„æºå ç”¨ | é«˜ (Python+Qt+Mitmproxy) | ä½ (çº¯Surge) |
| å®‰è£…å¤æ‚åº¦ | éœ€è¦ç¯å¢ƒé…ç½® | ä¸€é”®å®‰è£… |
| å¯åŠ¨é€Ÿåº¦ | æ…¢ (å¤šç»„ä»¶) | å¿« (å•æ¨¡å—) |
| ç»´æŠ¤æˆæœ¬ | é«˜ | ä½ |
| å…¼å®¹æ€§ | ä¾èµ–ç³»ç»Ÿ | SurgeåŸç”Ÿ |

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-XX)
- âœ… å®Œæ•´ç§»æ¤Pythoné¡¹ç›®åŠŸèƒ½
- âœ… å®ç°Surgeè¿œç¨‹å®‰è£…æ”¯æŒ
- âœ… ä¼˜åŒ–æ¨¡å—ç»“æ„å’Œä¾èµ–å…³ç³»
- âœ… æ·»åŠ æ™ºèƒ½tokenåˆ·æ–°æœºåˆ¶
- âœ… å®Œå–„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç›‘æ§

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºåŸPythoné¡¹ç›®è½¬æ¢è€Œæ¥ï¼Œéµå¾ªç›¸åŒçš„è®¸å¯è¯ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHubä»“åº“](https://github.com/RayYiHang/warp_surge)
- [åŸPythoné¡¹ç›®](https://github.com/RayYiHang/warp.dev_account_manager)
- [Surgeå®˜æ–¹æ–‡æ¡£](https://manual.nssurge.com/)

---

**âš ï¸ å…è´£å£°æ˜**: æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ï¼Œè¯·éµå®ˆç›¸å…³æœåŠ¡æ¡æ¬¾ã€‚